<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flashcards PWA</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#4CAF50">

  <!-- iOS install support -->
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
  ...
  <script>
    // Register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log("Service Worker registered"))
        .catch(err => console.log("SW fail:", err));
    }
  </script>
</body>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flashcards PWA</title>
<link rel="manifest" href="manifest.webmanifest">
<style>
:root {
  --bg: #f0f4f8;
  --card: #ffffff;
  --accent: #4CAF50;
}
body {
  margin:0; font-family:sans-serif; background:var(--bg); display:flex; flex-direction:column; height:100vh;
}
header {
  background:var(--accent); color:white; padding:10px; text-align:center;
}
main { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; }
.stage { flex:1; display:flex; align-items:center; justify-content:center; width:100%; perspective:1000px; }
.card {
  width:80%; height:60%; position:relative; transform-style:preserve-3d; transition:transform 0.8s;
}
.card.flipped { transform:rotateY(180deg); }
.face {
  position:absolute; width:100%; height:100%; backface-visibility:hidden; display:flex; flex-direction:column; align-items:center; justify-content:center;
  border-radius:25px; background:var(--card); box-shadow:0 4px 8px rgba(0,0,0,0.2);
}
.back { transform:rotateY(180deg); }
.big-text { font-size:5rem; margin-bottom:10px; }
.sub { font-size:2rem; }

nav { display:flex; justify-content:center; flex-wrap:wrap; margin:10px; gap:5px; }
button { padding:10px 15px; border:none; border-radius:8px; cursor:pointer; background:#ddd; }
button[aria-pressed="true"] { background:var(--accent); color:#fff; }
.seg button { margin:2px; }

/* Alphabet grid */
.alphabet-grid {
  display:grid; grid-template-columns:repeat(auto-fill, minmax(120px,1fr));
  gap:15px; padding:20px; width:100%; box-sizing:border-box;
}
.alphabet-tile {
  background:#fff; border-radius:15px; box-shadow:0 4px 8px rgba(0,0,0,0.2);
  text-align:center; padding:15px; font-size:2rem; cursor:pointer; transition:transform 0.2s ease;
}
.alphabet-tile:hover { transform:scale(1.05); }
.alphabet-tile .letter { font-size:3rem; font-weight:bold; margin-bottom:5px; }
.alphabet-tile .emoji { font-size:2rem; margin-bottom:5px; }
.alphabet-tile .word { font-size:1.2rem; color:#444; }
.highlight { border:3px solid var(--accent); }
</style>
</head>
<body>
<header>
  <h1 id="appTitle">I Can Learn!</h1>
</header>
<main>
  <div class="stage">
    <div class="card" id="card">
      <div class="face front" id="front"></div>
      <div class="face back" id="back"></div>
    </div>
  </div>
  <div class="alphabet-grid" id="alphabetGrid" hidden></div>
</main>
<nav>
  <div class="seg">
    <button data-mode="colors">Colors</button>
    <button data-mode="words">Words</button>
    <button data-mode="numbers">Numbers</button>
    <button data-mode="shapes">Shapes</button>
    <button data-mode="alphabet">Alphabet</button>
    <button data-mode="favorites">â˜… Favorites</button>
  </div>
  <button id="prev">Prev</button>
  <button id="flip">Flip</button>
  <button id="next">Next</button>
  <button id="shuffle">Shuffle</button>
  <button id="auto">AutoPlay</button>
  <button id="speak">ðŸ”Š</button>
</nav>

<script>
const COLORS=[{front:"Red",back:"ðŸ”´"},{front:"Blue",back:"ðŸ”µ"},{front:"Green",back:"ðŸŸ¢"},{front:"Yellow",back:"ðŸŸ¡"}
{front:â€Orangeâ€,back:â€ðŸŸ â€}
{front:â€Brownâ€,back:â€ðŸŸ¤â€}
{front:â€Purpleâ€,back:â€ðŸŸ£â€}
{front:â€Whiteâ€,back:â€âšªï¸â€}
{front:â€Blackâ€,back:â€âš«ï¸â€];
const WORDS=[
  {emoji:"ðŸŽ",word:"Apple"},{emoji:"ðŸ»",word:"Bear"},{emoji:"ðŸ±",word:"Cat"},
  {emoji:"ðŸ¶",word:"Dog"},{emoji:"ðŸ¥š",word:"Egg"},{emoji:"ðŸ¸",word:"Frog"},
  {emoji:"ðŸ¦’",word:"Giraffe"},{emoji:"ðŸ ",word:"House"},{emoji:"ðŸ¦",word:"Ice Cream"},
  {emoji:"ðŸ§ƒ",word:"Juice"},{emoji:"ðŸ¦˜",word:"Kangaroo"},{emoji:"ðŸ¦",word:"Lion"},
  {emoji:"ðŸŒ",word:"Moon"},{emoji:"ðŸ¥·ðŸ½",word:"Ninja"},{emoji:"ðŸ™",word:"Octopus"},
  {emoji:"ðŸ•",word:"Pizza"},{emoji:"ðŸ‘¸",word:"Queen"},{emoji:"ðŸŒˆ",word:"Rainbow"},
  {emoji:"â­",word:"Star"},{emoji:"ðŸŒ³",word:"Tree"},{emoji:"â˜‚ï¸",word:"Umbrella"},
  {emoji:"ðŸŽ»",word:"Violin"},{emoji:"ðŸŒŠ",word:"Water"},{emoji:"âŒ",word:"X-ray"},
  {emoji:"ðŸ›¶",word:"Yacht"},{emoji:"ðŸ¦“",word:"Zebra"}
];
const NUMBERS=[{front:"1"},
{front:"2"},
{front:"3"},
{front:â€4â€},
{front:â€5â€},
{front:â€6â€},
{front:â€7â€},
{front:â€8â€}
{front:â€9â€},
{front:â€10â€}
];
const SHAPES=[{front:"Circle",back:"âšª"},{front:"Square",back:"â¬œ"},{front:"Triangle",back:"ðŸ”º"},
{front:â€Ovalâ€,back:â€ðŸ¥šâ€},
{front:â€Diamondâ€,back:â€ðŸ”·â€}];
const FAVORITES=[];
let mode="colors", index=0, flipped=false, autoplay=null, muted=false;

// DOM
const card=document.getElementById("card"), front=document.getElementById("front"), back=document.getElementById("back");
const appTitle=document.getElementById("appTitle"), alphabetGrid=document.getElementById("alphabetGrid");

// Alphabet mode
let alphabetTimer=null, alphabetIndex=0;

function deck(){
  return mode==="colors"?COLORS:
         mode==="words"?WORDS:
         mode==="numbers"?NUMBERS:
         mode==="shapes"?SHAPES:
         mode==="alphabet"?LETTERS:
         FAVORITES;
}

function speak(text){
  if(muted) return;
  speechSynthesis.cancel();
  const utter=new SpeechSynthesisUtterance(text);
  speechSynthesis.speak(utter);
}

function render(){
  if(mode==="alphabet"){ renderAlphabetGrid(); return; }
  exitAlphabetGrid();
  const d=deck(); if(index>=d.length) index=0;
  const item=d[index];
  card.classList.toggle("flipped",flipped);
  if(mode==="letters"){
    appTitle.textContent="Flashcards: Letters";
    front.innerHTML=`<div class="big-text">${item.letter}</div>`;
    back.innerHTML=`<div class="emoji">${item.emoji}</div><div class="sub">${item.word}</div>`;
  }else if(mode==="colors"){
    appTitle.textContent="Flashcards: Colors";
    front.innerHTML=`<div class="big-text">${item.front}</div>`;
    back.innerHTML=`<div class="big-text">${item.back}</div>`;
  }else if(mode==="numbers"){
    appTitle.textContent="Flashcards: Numbers";
    front.innerHTML=`<div class="big-text">${item.front}</div>`;
    back.innerHTML=`<div class="big-text">${item.back}</div>`;
  }else if(mode==="shapes"){
    appTitle.textContent="Flashcards: Shapes";
    front.innerHTML=`<div class="big-text">${item.front}</div>`;
    back.innerHTML=`<div class="big-text">${item.back}</div>`;
  }else if(mode==="favorites"){
    appTitle.textContent="Flashcards: Favorites";
    front.innerHTML=`<div class="big-text">${item.front}</div>`;
    back.innerHTML=`<div class="big-text">${item.back}</div>`;
  }
  speak(item.front||item.letter);
}

// Alphabet Grid
function renderAlphabetGrid(){
  appTitle.textContent="Flashcards: Alphabet Grid";
  document.querySelector(".stage").style.display="none";
  alphabetGrid.hidden=false;
  alphabetGrid.innerHTML="";
  LETTERS.forEach((item,idx)=>{
    const tile=document.createElement("div");
    tile.className="alphabet-tile";
    tile.innerHTML=`<div class="letter">${item.letter}</div><div class="emoji">${item.emoji}</div><div class="word">${item.word}</div>`;
    tile.addEventListener("click",()=>{
      speak(`${item.letter}, ${item.word}`);
      highlightTile(idx);
      alphabetIndex=idx;
    });
    alphabetGrid.appendChild(tile);
  });
  if(alphabetTimer) clearInterval(alphabetTimer);
  alphabetIndex=0;
  speak(`${LETTERS[0].letter}, ${LETTERS[0].word}`);
  highlightTile(0);
  alphabetTimer=setInterval(()=>{
    alphabetIndex=(alphabetIndex+1)%LETTERS.length;
    const l=LETTERS[alphabetIndex];
    speak(`${l.letter}, ${l.word}`);
    highlightTile(alphabetIndex);
  },5000);
}
function highlightTile(idx){
  document.querySelectorAll(".alphabet-tile").forEach((t,i)=>t.classList.toggle("highlight",i===idx));
}
function exitAlphabetGrid(){
  if(alphabetTimer) clearInterval(alphabetTimer);
  alphabetGrid.hidden=true;
  document.querySelector(".stage").style.display="flex";
}

// Events
document.querySelectorAll("[data-mode]").forEach(b=>b.onclick=()=>{
  mode=b.dataset.mode; index=0; flipped=false; render();
});
document.getElementById("prev").onclick=()=>{index=(index-1+deck().length)%deck().length;render();};
document.getElementById("next").onclick=()=>{index=(index+1)%deck().length;render();};
document.getElementById("flip").onclick=()=>{flipped=!flipped;render();};
document.getElementById("shuffle").onclick=()=>{index=Math.floor(Math.random()*deck().length);render();};
document.getElementById("auto").onclick=()=>{
  if(autoplay){clearInterval(autoplay);autoplay=null;}
  else autoplay=setInterval(()=>{index=(index+1)%deck().length;render();},2000);
};
document.getElementById("speak").onclick=()=>{muted=!muted;document.getElementById("speak").textContent=muted?"ðŸ”‡":"ðŸ”Š";};

// Swipe
let touchStartX=0;
document.addEventListener("touchstart",e=>{touchStartX=e.changedTouches[0].screenX;});
document.addEventListener("touchend",e=>{
  let dx=e.changedTouches[0].screenX-touchStartX;
  if(Math.abs(dx)>50){ if(dx>0) index=(index-1+deck().length)%deck().length; else index=(index+1)%deck().length; render();}
});

// Start
render();
</script>
</body>
</html>