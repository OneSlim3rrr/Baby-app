<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Toddler Flashcards â€“ PWA</title>
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#5b8ef9">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="assets/icon-192.png">
<style>
body {
  font-family: "Comic Sans MS", "Fredoka One", sans-serif;
  background: #f0f9ff;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

.flashcard {
  width: 90%;
  height: 70%;
  background: white;
  border-radius: 25px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.2);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 8rem;
  font-weight: bold;
  color: #333;
  transition: transform 0.4s ease;
}

.flashcard:active {
  transform: scale(1.1) rotate(3deg);
}

button {
  font-size: 2rem;
  border: none;
  background: #4cafef;
  color: white;
  border-radius: 50%;
  width: 80px;
  height: 80px;
  margin: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

button:active {
  background: #0077cc;
}
</style>
</head>
<body>
<header>
  <div class="row">
    <div class="title" id="appTitle">Flashcards: Colors</div>
    <div class="spacer"></div>
    <div class="seg" role="group">
      <button data-mode="colors" aria-pressed="true">Colors</button>
      <button data-mode="letters" aria-pressed="false">Letters</button>
      <button data-mode="numbers" aria-pressed="false">Numbers</button>
      <button data-mode="shapes" aria-pressed="false">Shapes</button>
      <button data-mode="favorites" aria-pressed="false">Favorites</button>
    </div>
    <button id="muteBtn" aria-pressed="false" title="Toggle sound">ğŸ”Š</button>
  </div>
</header>
<main>
  <div class="stage">
    <div class="card-wrap" id="cardWrap" tabindex="0" aria-live="polite">
      <div class="card" id="card">
        <div class="face front" id="front"></div>
        <div class="face back" id="back"></div>
      </div>
    </div>
    <div class="controls">
      <button id="prevBtn" class="wide">âŸµ Prev</button>
      <button id="flipBtn" class="wide">Flip</button>
      <button id="nextBtn" class="wide">Next âŸ¶</button>
      <button id="shuffleBtn" class="wide">Shuffle</button>
      <button id="autoplayBtn" class="tall">Auto Play</button>
      <button id="fullscreenBtn" class="tall">Full Screen</button>
    </div>
  </div>
</main>
<footer>Tap the card to flip. Swipe or use buttons. Install from Safari via â€œAdd to Home Screenâ€.</footer>

<script>
// Register Service Worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('./service-worker.js');
  });
}

(function(){
  const COLORS=[
    {name:"Red",hex:"#ff3b30",emoji:"ğŸ",object:"apple"},
    {name:"Blue",hex:"#007aff",emoji:"ğŸš—",object:"car"},
    {name:"Yellow",hex:"#ffcc00",emoji:"ğŸŒ",object:"sun"},
    {name:"Green",hex:"#34c759",emoji:"ğŸ€",object:"leaf"},
    {name:"Orange",hex:"#ff9500",emoji:"ğŸŠ",object:"orange"},
    {name:"Purple",hex:"#af52de",emoji:"ğŸ‡",object:"grapes"},
    {name:"Pink",hex:"#ff2d55",emoji:"ğŸ·",object:"pig"},
    {name:"Brown",hex:"#8b5e3c",emoji:"ğŸ»",object:"bear"},
    {name:"Black",hex:"#000000",emoji:"ğŸ§",object:"penguin"},
    {name:"White",hex:"#ffffff",emoji:"â›„",object:"snowman"}
  ];
  const LETTERS=[
    {letter:"A",word:"Apple",emoji:"ğŸ"},{letter:"B",word:"Bear",emoji:"ğŸ»"},{letter:"C",word:"Cat",emoji:"ğŸ±"},
    {letter:"D",word:"Dog",emoji:"ğŸ¶"},{letter:"E",word:"Egg",emoji:"ğŸ¥š"},{letter:"F",word:"Frog",emoji:"ğŸ¸"},
    {letter:"G",word:"Grapes",emoji:"ğŸ‡"},{letter:"H",word:"House",emoji:"ğŸ "},{letter:"I",word:"Ice cream",emoji:"ğŸ¨"},
    {letter:"J",word:"Juice",emoji:"ğŸ§ƒ"},{letter:"K",word:"Kite",emoji:"ğŸª"},{letter:"L",word:"Lion",emoji:"ğŸ¦"},
    {letter:"M",word:"Moon",emoji:"ğŸŒ™"},{letter:"N",word:"Nose",emoji:"ğŸ‘ƒ"},{letter:"O",word:"Orange",emoji:"ğŸŠ"},
    {letter:"P",word:"Pig",emoji:"ğŸ·"},{letter:"Q",word:"Queen",emoji:"ğŸ‘‘"},{letter:"R",word:"Rainbow",emoji:"ğŸŒˆ"},
    {letter:"S",word:"Sun",emoji:"ğŸŒ"},{letter:"T",word:"Turtle",emoji:"ğŸ¢"},{letter:"U",word:"Umbrella",emoji:"â˜‚ï¸"},
    {letter:"V",word:"Violin",emoji:"ğŸ»"},{letter:"W",word:"Whale",emoji:"ğŸ³"},{letter:"X",word:"Xylophone",emoji:"ğŸ¼"},
    {letter:"Y",word:"Yarn",emoji:"ğŸ§¶"},{letter:"Z",word:"Zebra",emoji:"ğŸ¦“"}
  ];
  const NUMBERS=[
    {num:"1",word:"One dog",emoji:"ğŸ¶"},{num:"2",word:"Two fingers",emoji:"âœŒï¸"},{num:"3",word:"Three bananas",emoji:"ğŸŒ"},
    {num:"4",word:"Four cars",emoji:"ğŸš—"},{num:"5",word:"Five stars",emoji:"â­"},{num:"6",word:"Six fish",emoji:"ğŸŸ"},
    {num:"7",word:"Seven colors",emoji:"ğŸŒˆ"},{num:"8",word:"Eight legs",emoji:"ğŸ™"},{num:"9",word:"Nine balloons",emoji:"ğŸˆ"},
    {num:"10",word:"Ten cookies",emoji:"ğŸª"}
  ];
  const SHAPES=[
    {shape:"Circle",emoji:"âšª"},{shape:"Square",emoji:"ğŸŸ¥"},{shape:"Triangle",emoji:"ğŸ”º"},{shape:"Star",emoji:"â­"},
    {shape:"Heart",emoji:"â¤ï¸"},{shape:"Oval",emoji:"ğŸ¥š"},{shape:"Diamond",emoji:"ğŸ’"},{shape:"Rectangle",emoji:"ğŸ“±"}
  ];
  const FAVORITES=[
    {name:"Dog",emoji:"ğŸ¶"},{name:"Cat",emoji:"ğŸ±"},{name:"Fire Truck",emoji:"ğŸš’"},{name:"Airplane",emoji:"âœˆï¸"},
    {name:"Tractor",emoji:"ğŸšœ"},{name:"Elephant",emoji:"ğŸ˜"},{name:"Dinosaur",emoji:"ğŸ¦–"},{name:"Teddy Bear",emoji:"ğŸ§¸"}
  ];

  let mode=localStorage.getItem("mode")||"colors";
  let index=0; let flipped=false; let autoplay=null; let muted=(localStorage.getItem("muted")==="true");

  const appTitle=document.getElementById("appTitle");
  const front=document.getElementById("front"), back=document.getElementById("back"), card=document.getElementById("card");
  const cardWrap=document.getElementById("cardWrap");
  const segBtns=document.querySelectorAll(".seg button");
  const prevBtn=document.getElementById("prevBtn"), nextBtn=document.getElementById("nextBtn"),
        flipBtn=document.getElementById("flipBtn"), shuffleBtn=document.getElementById("shuffleBtn"),
        autoplayBtn=document.getElementById("autoplayBtn"), fullscreenBtn=document.getElementById("fullscreenBtn"),
        muteBtn=document.getElementById("muteBtn");

  function deck(){return mode==="colors"?COLORS:mode==="letters"?LETTERS:mode==="numbers"?NUMBERS:mode==="shapes"?SHAPES:FAVORITES;}
  function speak(txt){ if(muted) return; if(!("speechSynthesis" in window))return; try { let u=new SpeechSynthesisUtterance(txt); u.rate=0.7; window.speechSynthesis.cancel(); window.speechSynthesis.speak(u);}catch(e){} }
  function render(){
    const d=deck(); if(index<0) index=d.length-1; if(index>=d.length) index=0;
    const item=d[index]; card.classList.toggle("flipped",flipped);
    ifif(flipped){
    if(mode==="colors"){
        speak(item.name);
    } else if(mode==="letters"){
        speak(`${item.letter} is for ${item.word}`);
    } else if(mode==="numbers"){
        speak(item.word);
    } else if(mode==="shapes"){
        speak(item.shape);
    } else if(mode==="favorites"){
        speak(item.name);
    }
}
    muteBtn.textContent=muted?"ğŸ”‡":"ğŸ”Š";
  }

  function getTextColor(bgHex){
    const hex=bgHex.replace("#","");
    const r=parseInt(hex.substr(0,2),16); const g=parseInt(hex.substr(2,2),16); const b=parseInt(hex.substr(4,2),16);
    const yiq=(r*299+g*587+b*114)/1000;
    return yiq>=128?"#111111":"#ffffff";
  }

  // Controls & events
  document.querySelectorAll(".seg button").forEach(b=>b.addEventListener("click",()=>{mode=b.dataset.mode; localStorage.setItem("mode",mode); index=0; flipped=false; render();}));
  prevBtn.addEventListener("click",()=>{index--;flipped=false;render();});
  nextBtn.addEventListener("click",()=>{index++;flipped=false;render();});
  flipBtn.addEventListener("click",()=>{flipped=!flipped;render();});
  shuffleBtn.addEventListener("click",()=>{deck().sort(()=>Math.random()-0.5); index=0; flipped=false; render();});
  autoplayBtn.addEventListener("click",()=>{
    if(autoplay){ clearInterval(autoplay); autoplay=null; autoplayBtn.textContent="Auto Play"; }
    else { autoplay=setInterval(()=>{ index++; flipped=false; render(); }, 2500); autoplayBtn.textContent="Stop Auto"; }
  });
  fullscreenBtn.addEventListener("click",()=>{
    const el=document.documentElement;
    if(!document.fullscreenElement){ if(el.requestFullscreen) el.requestFullscreen(); }
    else { if(document.exitFullscreen) document.exitFullscreen(); }
  });
  muteBtn.addEventListener("click",()=>{ muted=!muted; localStorage.setItem("muted", muted?'true':'false'); render(); });
  cardWrap.addEventListener("click",()=>{ flipped=!flipped; render(); });

  // Swipe gestures
  let startX=null;
  cardWrap.addEventListener("touchstart",(e)=>{ if(e.touches.length===1) startX=e.touches[0].clientX; }, {passive:true});
  cardWrap.addEventListener("touchend",(e)=>{
    if(startX==null) return;
    const dx=e.changedTouches[0].clientX - startX;
    if(Math.abs(dx)>40){ if(dx<0){ index++; flipped=false; } else { index--; flipped=false; } render(); }
    startX=null;
  }, {passive:true});

  render();
})();
</script>
</body>
</html>
